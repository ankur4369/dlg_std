# Contribution Guidelines

## Handbook Sections

The handbook is split into different subsections for ease of navigation - you
can create new structures within the documentation by simply creating a folder
and an accompanying
[`_category_.json`](https://docusaurus.io/docs/sidebar/autogenerated#category-item-metadata)
file to customise the placement and name of the section - Docusaurus will then
take care of structuring the contents in the sidebar as you create additional
child pages.

## CODEOWNERS

There is a `CODEOWNERS` file defined in the root of the repository which allows
specific teams to be reviewers for a given area/subject matter space. This
allows any one in the organisation to raise a change to the documentation,
whilst ensuring the review/acceptance of the change is handled by dedicated
SME's.

All approval teams start with `engineering-standards-` followed by the area of
expertise - for example
[`engineering-standards-guidewire`](https://github.com/orgs/Direct-Line-Group/teams/engineering-standards-guidewire).

:::tip Creating a new approver group
If you are creating a new area for the handbook which requires SME review:

1. Add a new section in the docs directory - see [Handbook
   Sections](#handbook-sections)
1. Check there is not an existing team prefixed with `engineering-standards-`
   that can be reused
1. Create a team in GitHub prefixed with `engineering-standards-` - add the
   relevant SME's to this team
1. Edit the [CODEOWNERS
   file](https://github.com/Direct-Line-Group/se-engineering-handbook/blob/main/.github/CODEOWNERS),
   adding the team to the relevant path aligned to the section of the handbook
   created
   :::

## Writing Documentation

All documentation is written using Markdown and specifically a Docusaurus
flavour of Markdown which provides some additional features around
callouts/formatting - see the [Docusaurus
documentation](https://docusaurus.io/docs/markdown-features) for further
guidance.

The handbook should contain standards and process guidance information - for
day-to-day operational information on specific systems in DL - these should be
written outside of the Engineering Handbook either in the application repo - or
the wider DL Wiki.

## Diagrams

[Mermaid](https://mermaid.js.org/intro/) provides a mechanism for drawing
diagrams including flow charts, architectures, git graphs, sequence diagrams,
state diagrams, etc. via code - making it far easier for others to contribute
and make changes, but also as a way and means of versioning changes. The number
of diagram types is extensive and a full library is documented on the [Mermaid
Documentation](https://mermaid.js.org/syntax/flowchart.html).

The Engineering Handbook can visualise Mermaid diagrams as is - there is no need
to upload images - simply reference the mermaid diagram directly in the
markdown.

:::info Visualising Mermaid in Docusaurus

````markdown
```mermaid
---
title: My Amazing Mermaid Example
---
flowchart LR
    pA["Process A"]
    pB["Process B"]
    pA --> pB
\``` (NB: remove the initial backslash from this line)

````

Renders as:

```mermaid
---
title: My Amazing Mermaid Example
---
flowchart LR
    pA["Process A"]
    pB["Process B"]
    pA --> pB

```

:::

:::tip Icons/Diagrams in Mermaid
You can also use icons in your Mermaid diagrams - this is of particular use when
building architecture diagrams with Cloud Services.

You can find the current icon libraries available by navigating to the
[mermaid.tsx](https://github.com/Direct-Line-Group/se-engineering-handbook/blob/main/src/pages/mermaid.tsx)
file.

To specify an icon simply reference `logos:` or `fluent:` as a prefix before
your selection of icon - for example `logos:github` and
`fluent:animal-cat-20-regular`:

````markdown
```mermaid
    architecture-beta
        service dev(fluent:animal-cat-20-regular)[Developer]
        service repo(logos:github)[Repository]
        meow:R --> L:repo
\``` (NB: remove the initial backslash from this line)
````

Renders as:

```mermaid
    architecture-beta
        service dev(fluent:animal-cat-20-regular)[Developer]
        service repo(logos:github)[Repository]
        dev:R --> L:repo
```

:::

## Assets

It is possible to add assets to Docusaurus as well which can be helpful where
[diagrams](#diagrams) cannot be used - create an `assets` folder in the handbook
area where you want to reference the image from and then [reference
it](https://docusaurus.io/docs/markdown-features/assets) from the code.

Try to keep the number of assets to a minimum where possible.

## Raising Changes

Once you have the change to the documentation made on your local - it's good
practice to run pre-commit which will validate your documentation and catch any
formatting issues.

To run pre-commit:

1. Install [pre-commit](https://pre-commit.com/) for example:
   `brew install pre-commit` or `pip install pre-commit` in Python
1. Run `pre-commit install` to setup the checks
1. Execute pre-commit interactively via: `pre-commit` and remediate as appropriate

You can then raise a Pull Request for your change.
